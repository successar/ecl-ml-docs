<?xml version='1.0' encoding='UTF-8'?>
<Meta>
 <Query sourcePath="/media/sarthak/Data/ecl-ml/./ML/ToField.ecl"/>
 <Source name="ML.Tests.Deprecated.BWR_testBucketFunctions" sourcePath="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" target="bwr_testbucketfunctions.ecl.xml">
  <Import body="0" end="7" fullname="ML" inherit_type="local" line="1" name="ML" ref="ml" start="7" target="../../pkg.toc.xml">
   <Type>attribute</Type>
  </Import>
  <Definition body="27" end="119" fullname="ml.tests.deprecated.value_record" inherit_type="local" line="3" name="value_record" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="12">
   <Type>record</Type>
   <Field name="rid"/>
   <Field name="height"/>
   <Field name="weight"/>
   <Field name="age"/>
   <Signature pre="" post="" name="VALUE_RECORD">value_record</Signature><Field name="species"/>
  </Definition>
  <Definition body="141" end="763" fullname="ml.tests.deprecated.d" inherit_type="local" line="11" name="d" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="137">
   <Signature pre="" post="" name="D">d</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="1015" end="1045" fullname="ml.tests.deprecated.simple" inherit_type="local" line="34" name="Simple" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1006">
   <Signature pre="" post="" name="SIMPLE">Simple</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="1061" end="1097" fullname="ml.tests.deprecated.simpleranked" inherit_type="local" line="35" name="SimpleRanked" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1046">
   <Signature pre="" post="" name="SIMPLERANKED">SimpleRanked</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="1104" end="1127" fullname="ML.FieldAggregates" inherit_type="local" line="37" name="F1" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1099" target="../../fieldaggregates.ecl.xml">
   <Type>module</Type>
   <Definition body="517" end="549" exported="1" fullname="ml.fieldaggregates.simple" inherit_type="local" line="16" name="Simple" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="502" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="SIMPLE">Simple</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="726" end="729" exported="1" fullname="ml.fieldaggregates.simpleranked" inherit_type="local" line="27" name="SimpleRanked" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="704" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="SIMPLERANKED">SimpleRanked</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="1080" end="1213" exported="1" fullname="ml.fieldaggregates.medians" inherit_type="local" line="31" name="Medians" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="1064" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="MEDIANS">Medians</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="1815" end="1876" exported="1" fullname="ml.fieldaggregates.minmednext" inherit_type="local" line="38" name="MinMedNext" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="1796" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="MINMEDNEXT">MinMedNext</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="2148" end="2228" exported="1" fullname="ml.fieldaggregates.buckets" inherit_type="local" line="45" name="Buckets" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="2112" target="../../fieldaggregates.ecl.xml">
    <Type>function</Type>
    <Signature pre="" post="(Types.t_Discrete n)" name="BUCKETS">Buckets(Types.t_Discrete n)</Signature><Params>
     <Param name="n"/>
    </Params>
   </Definition>
   <Definition body="2270" end="2426" exported="1" fullname="ml.fieldaggregates.bucketranges" inherit_type="local" line="46" name="BucketRanges" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="2229" target="../../fieldaggregates.ecl.xml">
    <Type>function</Type>
    <Signature pre="" post="(Types.t_Discrete n)" name="BUCKETRANGES">BucketRanges(Types.t_Discrete n)</Signature><Params>
     <Param name="n"/>
    </Params>
   </Definition>
   <Definition body="2594" end="2631" fullname="ml.fieldaggregates.t" inherit_type="local" line="55" name="T" shared="1" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="2583" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="T">T</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="2727" end="2991" exported="1" fullname="ml.fieldaggregates.modes" inherit_type="local" line="58" name="Modes" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="2713" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="MODES">Modes</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="3013" end="3074" exported="1" fullname="ml.fieldaggregates.cardinality" inherit_type="local" line="62" name="Cardinality" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="2993" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="CARDINALITY">Cardinality</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="3238" end="3374" exported="1" fullname="ml.fieldaggregates.rankedinput" inherit_type="local" line="74" name="RankedInput" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="3217" target="../../fieldaggregates.ecl.xml">
    <Signature pre="" post="" name="RANKEDINPUT">RankedInput</Signature><Type>attribute</Type>
   </Definition>
   <Definition body="3621" end="3781" exported="1" fullname="ml.fieldaggregates.ntiles" inherit_type="local" line="83" name="NTiles" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="3586" target="../../fieldaggregates.ecl.xml">
    <Type>function</Type>
    <Signature pre="" post="(Types.t_Discrete n)" name="NTILES">NTiles(Types.t_Discrete n)</Signature><Params>
     <Param name="n"/>
    </Params>
   </Definition>
   <Definition body="3822" end="4040" exported="1" fullname="ml.fieldaggregates.ntileranges" inherit_type="local" line="86" name="NTileRanges" source="/media/sarthak/Data/ecl-ml/./ML/FieldAggregates.ecl" start="3782" target="../../fieldaggregates.ecl.xml">
    <Type>function</Type>
    <Signature pre="" post="(Types.t_Discrete n)" name="NTILERANGES">NTileRanges(Types.t_Discrete n)</Signature><Params>
     <Param name="n"/>
    </Params>
   </Definition>
   <Signature pre="" post="" name="F1">F1</Signature><Parents/>
  </Definition>
  <Definition body="1179" end="1233" fullname="ml.tests.deprecated.speciesfeaturebuckets" inherit_type="local" line="40" name="SpeciesFeatureBuckets" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1155">
   <Signature pre="" post="" name="SPECIESFEATUREBUCKETS">SpeciesFeatureBuckets</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="1322" end="1361" fullname="ml.tests.deprecated.chickweightbucketranges" inherit_type="local" line="42" name="ChickWeightBucketRanges" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1296">
   <Signature pre="" post="" name="CHICKWEIGHTBUCKETRANGES">ChickWeightBucketRanges</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="1461" end="1529" fullname="ml.tests.deprecated.bucketrec" inherit_type="local" line="45" name="BucketRec" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1449">
   <Type>record</Type>
   <Field name="id"/>
   <Field name="number"/>
   <Field name="value"/>
   <Field name="Pos"/>
   <Signature pre="" post="" name="BUCKETREC">BucketRec</Signature><Field name="bucket"/>
  </Definition>
  <Definition body="1598" end="1730" fullname="ml.tests.deprecated.tassign" inherit_type="local" line="51" name="tAssign" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1532">
   <Type>transform</Type>
   <Params>
    <Param name="L"/>
    <Param name="R"/>
    <Param name="n"/>
   </Params>
   <Signature pre="BucketRec" post="(SimpleRanked L,Simple R,ML.Types.t_Discrete n)" name="TASSIGN">BucketRec tAssign(SimpleRanked L,Simple R,ML.Types.t_Discrete n)</Signature><Return>bucketrec</Return>
  </Definition>
  <Definition body="1756" end="1836" fullname="ml.tests.deprecated.speciesfeaturebuckets2" inherit_type="local" line="56" name="SpeciesFeatureBuckets2" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1732">
   <Signature pre="" post="" name="SPECIESFEATUREBUCKETS2">SpeciesFeatureBuckets2</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="1849" end="1890" fullname="ml.tests.deprecated.diff_rec" inherit_type="local" line="58" name="diff_rec" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1838">
   <Type>record</Type>
   <Field name="LorR"/>
   <Field name="id"/>
   <Field name="number"/>
   <Field name="value"/>
   <Field name="Pos"/>
   <Signature pre="" post="" name="DIFF_REC">diff_rec</Signature><Field name="bucket"/>
  </Definition>
  <Definition body="1944" end="1998" fullname="ml.tests.deprecated.loaddiff" inherit_type="local" line="63" name="loadDiff" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="1892">
   <Type>transform</Type>
   <Params>
    <Param name="brec"/>
    <Param name="LorR"/>
   </Params>
   <Signature pre="diff_rec" post="( BucketRec brec, string1 LorR )" name="LOADDIFF">diff_rec loadDiff( BucketRec brec, string1 LorR )</Signature><Return>diff_rec</Return>
  </Definition>
  <Definition body="2017" end="2161" fullname="ml.tests.deprecated.diff_left_only" inherit_type="local" line="68" name="diff_left_only" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="2000">
   <Signature pre="" post="" name="DIFF_LEFT_ONLY">diff_left_only</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="2180" end="2326" fullname="ml.tests.deprecated.diff_right_only" inherit_type="local" line="69" name="diff_right_only" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="2162">
   <Signature pre="" post="" name="DIFF_RIGHT_ONLY">diff_right_only</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="2334" end="2368" fullname="ml.tests.deprecated.diff" inherit_type="local" line="70" name="diff" source="/media/sarthak/Data/ecl-ml/ML/Tests/Deprecated/BWR_testBucketFunctions.ecl" start="2327">
   <Signature pre="" post="" name="DIFF">diff</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="29" end="91" fullname="ml.tests.deprecated.o_toname" inherit_type="local" line="81" name="o_ToName" source="/media/sarthak/Data/ecl-ml/./ML/ToField.ecl" start="0">
   <Type>function</Type>
   <Signature pre="" post="" name="O_TONAME">//---------------------------</Signature><Params>
    <Param name="i"/>
   </Params>
  </Definition>
  <Definition body="31" end="92" fullname="ml.tests.deprecated.o_tonumber" inherit_type="local" line="83" name="o_ToNumber" source="/media/sarthak/Data/ecl-ml/./ML/ToField.ecl" start="0">
   <Type>function</Type>
   <Signature pre="" post="" name="O_TONUMBER">//-----------------------------</Signature><Params>
    <Param name="s"/>
   </Params>
  </Definition>
  <Definition body="2485" end="2654" fullname="ml.tests.deprecated.o" inherit_type="local" line="85" name="o" source="/media/sarthak/Data/ecl-ml/./ML/ToField.ecl" start="1">
   <Signature pre="/---------------------------------------------------------------------------&#10;// Macr" post="takes a matrix dataset, with each row contianing an ID and one or&#10;// more axis fields containing numeric values, and expands it into the &#10;// NumericField format used by ML.&#10;//&#10;//   dIn       : The name of the input dataset&#10;//   dOut      : The name of the resulting dataset&#10;//   idfield   : [OPTIONAL] The name of the field that contains the UID for&#10;//               each row.  If omitted, it is assumed to be the first field.&#10;//   datafields: [OPTIONAL] A STRING contianing a comma-delimited list of the&#10;//               fields to be treated as axes.  If omitted, all numeric&#10;//               fields that are not the UID will be treated as axes.&#10;//               NOTE: idfield defaults to the first field in the table, so&#10;//               if that field is specified as an axis field, then the user&#10;//               should be sure to specify a value in the idfield param.&#10;//&#10;//  Along with creating the NumericField table, this macro produces two&#10;//  simple functions to assist the user in mapping the field names to their&#10;//  corresponding numbers.  These are &quot;STRING dOut_ToName(UNSIGNED)&quot; and&#10;//  &quot;UNSIGNED dOut_ToNumber(STRING)&quot;, where the &quot;dOut&quot; portion of the function&#10;//  name is the name passed into that parameter of the macro.&#10;//&#10;//  The macro also produces a mapping table named &quot;dOut_Map&quot;, again where&#10;//  &quot;dOut&quot; refers to the parameter, that contains a table of the field&#10;//  mappings&#10;//  &#10;//  Examples:&#10;//    ML.ToField(dOrig,dMatrix);&#10;//    ML.ToField(dOrig,dMatrix,myid,'field5,field7,field10');&#10;//    dMatrix_ToName(2);  // returns 'field7'&#10;//    dMatrix_ToNumber('field10'); // returns 3&#10;//    dMatrix_Map; // returns the mapping table of field name to number&#10;//---------------------------------------------------------------------------&#10;EXPORT ToField(dIn,dOut,idfield='',datafields=''):=MACRO&#10;  LOADXML('&lt;xml/&gt;');&#10;  // Variable to contain the name of the field that maps to &quot;id&quot;&#10;  #DECLARE(foundidfield) #SET(foundidfield,#TEXT(idfield))&#10;  // Contains a comma-delimited list of the fields that will be used as axes,&#10;  // beginning with &quot;COUNTER&quot; so it can be #EXPANDED into a CHOOSE call&#10;  // during normalization&#10;  #DECLARE(normlist) #SET(normlist,'COUNTER')&#10;  // Count of the fields that become axes&#10;  #DECLARE(iNumberOfFields) #SET(iNumberOfFields,0)&#10;  // A list of every field in the original table and the field number (or &quot;ID&quot;)&#10;  // to which it is mapped in the output.  &quot;" name="O">/---------------------------------------------------------------------------
// Macro takes a matrix dataset, with each row contianing an ID and one or
// more axis fields containing numeric values, and expands it into the 
// NumericField format used by ML.
//
//   dIn       : The name of the input dataset
//   dOut      : The name of the resulting dataset
//   idfield   : [OPTIONAL] The name of the field that contains the UID for
//               each row.  If omitted, it is assumed to be the first field.
//   datafields: [OPTIONAL] A STRING contianing a comma-delimited list of the
//               fields to be treated as axes.  If omitted, all numeric
//               fields that are not the UID will be treated as axes.
//               NOTE: idfield defaults to the first field in the table, so
//               if that field is specified as an axis field, then the user
//               should be sure to specify a value in the idfield param.
//
//  Along with creating the NumericField table, this macro produces two
//  simple functions to assist the user in mapping the field names to their
//  corresponding numbers.  These are "STRING dOut_ToName(UNSIGNED)" and
//  "UNSIGNED dOut_ToNumber(STRING)", where the "dOut" portion of the function
//  name is the name passed into that parameter of the macro.
//
//  The macro also produces a mapping table named "dOut_Map", again where
//  "dOut" refers to the parameter, that contains a table of the field
//  mappings
//  
//  Examples:
//    ML.ToField(dOrig,dMatrix);
//    ML.ToField(dOrig,dMatrix,myid,'field5,field7,field10');
//    dMatrix_ToName(2);  // returns 'field7'
//    dMatrix_ToNumber('field10'); // returns 3
//    dMatrix_Map; // returns the mapping table of field name to number
//---------------------------------------------------------------------------
EXPORT ToField(dIn,dOut,idfield='',datafields=''):=MACRO
  LOADXML('&lt;xml/&gt;');
  // Variable to contain the name of the field that maps to "id"
  #DECLARE(foundidfield) #SET(foundidfield,#TEXT(idfield))
  // Contains a comma-delimited list of the fields that will be used as axes,
  // beginning with "COUNTER" so it can be #EXPANDED into a CHOOSE call
  // during normalization
  #DECLARE(normlist) #SET(normlist,'COUNTER')
  // Count of the fields that become axes
  #DECLARE(iNumberOfFields) #SET(iNumberOfFields,0)
  // A list of every field in the original table and the field number (or "ID")
  // to which it is mapped in the output.  "</Signature><Type>attribute</Type>
  </Definition>
  <Definition body="7" end="2800" fullname="ml.tests.deprecated.o_map" inherit_type="local" line="87" name="o_Map" source="/media/sarthak/Data/ecl-ml/./ML/ToField.ecl" start="0">
   <Signature pre="" post="" name="O_MAP">//-----</Signature><Type>attribute</Type>
  </Definition>
 </Source>
 <Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/ToField.ecl" name="ML.ToField" target="../../tofield.ecl.xml"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/Types.ecl" name="ML.Types" target="../../types.ecl.xml"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/Mat/Types.ecl" name="ML.Mat.Types" target="../../mat/types.ecl.xml"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/FieldAggregates.ecl" name="ML.FieldAggregates" target="../../fieldaggregates.ecl.xml"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/Utils.ecl" name="ML.Utils" target="../../utils.ecl.xml"/><Depends sourcePath="/home/sarthak/runtime/opt/HPCCSystems/6.5.0/clienttools/share/ecllibrary/std/Str.ecl" name="std.Str" target="/home/sarthak/runtime/opt/HPCCSystems/6.5.0/clienttools/share/ecllibrary/std/Str.ecl"/><Depends sourcePath="lib_stringlib" target="lib_stringlib"/><Depends sourcePath="/home/sarthak/runtime/opt/HPCCSystems/6.5.0/clienttools/share/ecllibrary/std/system/Thorlib.ecl" name="std.system.Thorlib" target="/home/sarthak/runtime/opt/HPCCSystems/6.5.0/clienttools/share/ecllibrary/std/system/Thorlib.ecl"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/Mat/Repmat.ecl" name="ML.Mat.Repmat" target="../../mat/repmat.ecl.xml"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/Mat/Each.ecl" name="ML.Mat.Each" target="../../mat/each.ecl.xml"/><Depends sourcePath="/media/sarthak/Data/ecl-ml/ML/Mat/Has.ecl" name="ML.Mat.Has" target="../../mat/has.ecl.xml"/></Meta>